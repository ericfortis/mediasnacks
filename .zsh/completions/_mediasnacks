#compdef mediasnacks

_mediasnacks_commands=(
  'avif:Converts images to AVIF'
  'resize:Resizes videos or images'
  'moov2front:Rearranges metadata for fast-start streaming'
  'dropdups:Removes duplicate frames in a video'
  'seqcheck:Finds missing sequence number'
  'qdir:Sequentially runs all *.sh files in a folder'
  'hev1tohvc1:Fixes video thumbnails not rendering in macOS Finder'
  'framediff:ffplay with a filter for diffing adjacent frames'
  'videodiff:Plays a video with the difference of two videos'
  'vconcat:Concatenates videos',
  'dlaudio: yt-dlp best audio',
  'dlvideo: yt-dlp best video',
  'unemoji:Removes emojis from filenames'
  'rmcover:Removes cover art'
)

_mediasnacks() {
  if (( CURRENT == 2 )); then
    _describe -t commands 'mediasnacks commands' _mediasnacks_commands
    return
  fi

  local cmd="$words[2]"
  case "$cmd" in
    avif|resize|moov2front|dropdups|seqcheck|hev1tohvc1|framediff|videodiff|vconcat|dlaudio|dlvideo|unemoji|rmcover)
      _files
      ;;
    qdir)
      _files -/
      ;;
  esac
}

compdef _mediasnacks mediasnacks


# INSTALL in: ~/.zshrc
#fpath=(~/.zsh/completions $fpath)
#zmodload zsh/complist
#autoload -U compinit && compinit

#function mediasnacks() {
#  $HOME/work/mediasnacks/src/./cli.js "$@"
#}
